(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(41)},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(19),o=n.n(r),c=(n(27),n(5)),l=n(6),s=n(9),u=n(7),d=n(10),m=(n(28),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={inputValue:""},n.handleChange=function(e){n.setState({inputValue:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),n.props.handleAddCity(n.state.inputValue),n.setState({inputValue:""})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"form"},i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("input",{type:"text",value:this.state.value,onChange:this.handleChange,placeholder:"Nazwa miasta..."}),i.a.createElement("input",{type:"submit",value:"Dodaj"})))}}]),t}(a.Component)),h=n(8),g=(n(29),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,n=[],a=[],r=[];return this.props.weather.length&&(n=this.props.weather.map(function(n,o){return i.a.createElement("div",{className:"cityList",key:n.city.id},i.a.createElement("div",null,o),i.a.createElement("div",{className:"cityLink"},i.a.createElement(h.b,{to:"/city/".concat(n.city.id)},n.city.name)),n.list.forEach(function(e){return a.push(e.main.temp)}),i.a.createElement("div",null,e=a.map(function(e,t,n){return e/n.length}).reduce(function(e,t){return e+t}).toFixed(1),r.push({id:n.city.id,temp:e}),"metric"===t.props.deg?" \xb0C":" \xb0F"),i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){return t.props.handleRemoveCity(n.city.id)}},"Usu\u0144")),i.a.createElement("div",null,a.length=0))})),this.props.handleAvg(r),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"cityListHeader"},i.a.createElement("div",null,"#"),i.a.createElement("div",null,"Miasto"),i.a.createElement("div",null,"\u015arednia prognozowana temperatura"),i.a.createElement("div",null)),n)}}]),t}(a.Component)),p=(n(38),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={selectedOption:n.props.deg},n.radioChange=function(e){n.setState({selectedOption:e.currentTarget.value}),n.props.handleDeg(e.currentTarget.value),console.log(n.props.deg,"===",e.currentTarget.value)},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"set"},i.a.createElement("div",{className:"setName"},"Ustawienia"),i.a.createElement("div",{className:"radioButtonContainer"},i.a.createElement("div",null,"Jednostka:"),i.a.createElement("div",null,i.a.createElement("label",null,i.a.createElement("input",{type:"radio",value:"metric",checked:"metric"===this.state.selectedOption,onChange:this.radioChange}),"\xb0C"),i.a.createElement("label",null,i.a.createElement("input",{type:"radio",value:"imperial",checked:"imperial"===this.state.selectedOption,onChange:this.radioChange}),"\xb0F"))),i.a.createElement("div",{className:"back"},i.a.createElement(h.b,{to:"/"},"Powr\xf3t")))}}]),t}(a.Component)),f=(n(39),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t,n=this;return this.props.weather&&(e=this.props.weather.filter(function(e){return e.city.id==n.props.match.params.id}),t=this.props.tempAvg.filter(function(e){return e.id==n.props.match.params.id})),i.a.createElement("div",null,i.a.createElement("div",{class:"cityName"},e[0].city.name),i.a.createElement("div",{className:"detailsContainer"},i.a.createElement("div",null,i.a.createElement("div",null,"szeroko\u015b\u0107 geograficzna:"),i.a.createElement("div",null,e[0].city.coord.lat)),i.a.createElement("div",null,i.a.createElement("div",null,"d\u0142ugo\u015b\u0107 geograficzna:"),i.a.createElement("div",null,e[0].city.coord.lon)),i.a.createElement("div",null,i.a.createElement("div",null,"\u015brednia temperatura"),i.a.createElement("div",null,t[0].temp,"metric"===this.props.deg?" \xb0C":" \xb0F"))),i.a.createElement("div",{class:"back"},i.a.createElement(h.b,{to:"/"},"Powr\xf3t")))}}]),t}(a.Component)),v=n(11),y=(n(40),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={weather:[],cities:[],deg:"metric",degFlag:!1},n.tempAvg=[],n.handleAvg=function(e){console.log("Wywo\u0142anie handle AVG !!!"),n.tempAvg=e,console.log(n.tempAvg)},n.getLocalStorage=function(){var e,t=localStorage.getItem("storageCity");t&&(e=JSON.parse(t),console.log(t),n.setState({cities:e}))},n.setLocalStorage=function(){console.log("ZAPIS do local storage uruchamiany"),n.state.cities.length&&localStorage.setItem("storageCity",JSON.stringify(n.state.cities))},n.handleAddCity=function(e){console.log("Wywo\u0142anie handleAddCity");var t=n.state.cities;t.push(e),n.setState({cities:t})},n.rewriteArrayCities=function(){var e;console.log("rewriteArrayCities"),e=n.state.weather.map(function(e){return e.city.name}),console.log(e),n.setState({cities:e})},n.handleRemoveCity=function(e){var t,a=n.state.weather,i=n.state.cities;t=a.filter(function(t){return t.city.id===e}),a=a.filter(function(t){return t.city.id!==e}),console.log(t[0].city.name),i=i.filter(function(e){return e!==t[0].city.name}),console.log(i),n.setState({weather:a,cities:i})},n.handleDeg=function(e){console.log("handleDeg:",e),e===n.state.deg?n.setState({degFlag:!1}):n.setState({degFlag:!0}),"metric"===e?n.setState({deg:"metric"}):"imperial"===e&&n.setState({deg:"imperial"})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getLocalStorage()}},{key:"componentDidUpdate",value:function(){var e=this,t=this.state,n=t.weather,a=t.cities;console.log(a.length,n.length),console.log("deg",this.state.deg),console.log("flaga degFlag: ",this.state.degFlag),(a.length>n.length||this.state.degFlag)&&Promise.all(this.state.cities.map(function(t){return fetch("https://api.openweathermap.org/data/2.5/forecast?q=".concat(t,",PL&units=").concat(e.state.deg,"&APPID=96993feca341f53ea0847433eae53af5")).then(function(e){if(e.ok)return console.log(e.ok),e.json();throw new Error("Poda\u0142e\u015b z\u0142\u0105 nazw\u0119 miasta lub nie mog\u0119 si\u0119 po\u0142\u0105czy\u0107 z API !!!!!!!!!!!!!")})})).then(function(t){e.setState({weather:t,degFlag:!1},function(){console.log("jestem w update"),e.rewriteArrayCities(),e.setLocalStorage()})}).catch(function(e){console.log(e),alert(e)})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"settings"},i.a.createElement(h.b,{to:"/settings"},"Ustawienia")),i.a.createElement(v.a,{path:"/settings/",component:function(t){return i.a.createElement(p,{handleDeg:e.handleDeg,deg:e.state.deg,changeDeg:e.state.changeDeg})}}),i.a.createElement(v.a,{exact:!0,path:"/",component:function(t){return i.a.createElement("div",{className:"list"},i.a.createElement(m,{handleAddCity:e.handleAddCity})," ",i.a.createElement(g,{weather:e.state.weather,handleRemoveCity:e.handleRemoveCity,deg:e.state.deg,handleAvg:e.handleAvg}))}}),i.a.createElement(v.a,{path:"/city/:id",component:function(t){return i.a.createElement(f,Object.assign({weather:e.state.weather,tempAvg:e.tempAvg,deg:e.state.deg},t))}}))}}]),t}(a.Component)),w=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function E(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(i.a.createElement(h.a,null,i.a.createElement(y,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");w?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):E(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):E(t,e)})}}()}},[[22,1,2]]]);
//# sourceMappingURL=main.571ae8a6.chunk.js.map